define(function(require){var e=require("jquery");(function(e,t,i){e.noop=e.noop||function(){};var n,a,o,r,s=0,l=e(t),c=e(document),u=e("html"),d=document.documentElement,m=t.VBArray&&!t.XMLHttpRequest,p="createTouch"in document&&!("onmousemove"in d)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),g="artDialog"+ +new Date,f=function(t,a,o){t=t||{},("string"==typeof t||1===t.nodeType)&&(t={content:t,fixed:!p});var r,l=f.defaults,c=t.follow=1===this.nodeType&&this||t.follow;for(var u in l)t[u]===i&&(t[u]=l[u]);return e.each({ok:"yesFn",cancel:"noFn",close:"closeFn",init:"initFn",okVal:"yesText",cancelVal:"noText"},function(e,n){t[e]=t[e]!==i?t[e]:t[n]}),"string"==typeof c&&(c=e(c)[0]),t.id=c&&c[g+"follow"]||t.id||g+s,r=f.list[t.id],c&&r?r.follow(c).zIndex().focus():r?r.zIndex().focus():(p&&(t.fixed=!1),e.isArray(t.button)||(t.button=t.button?[t.button]:[]),a!==i&&(t.ok=a),o!==i&&(t.cancel=o),t.ok&&t.button.push({name:t.okVal,callback:t.ok,focus:!0}),t.cancel&&t.button.push({name:t.cancelVal,callback:t.cancel}),f.defaults.zIndex=t.zIndex,s++,f.list[t.id]=n?n._init(t):new f.fn._init(t))};if(f.fn=f.prototype={version:"4.1.6",closed:!0,_init:function(e){var i,a=this,o=e.icon,r=o&&(m?{png:"icons/"+o+".png"}:{backgroundImage:"url('"+e.path+"/skins/icons/"+o+".png')"});return a.mouseover=!1,a.closed=!1,a.config=e,a.DOM=i=a.DOM||a._getDOM(),i.wrap.addClass(e.skin),i.close[e.cancel===!1?"hide":"show"](),i.icon[0].style.display=o?"":"none",i.iconBg.css(r||{background:"none"}),i.se.css("cursor",e.resize?"se-resize":"auto"),i.title.css("cursor",e.drag?"move":"auto"),i.content.css("padding",e.padding),a[e.show?"show":"hide"](!0),a.button(e.button).title(e.title).content(e.content,!0).size(e.width,e.height).time(e.time),e.follow?a.follow(e.follow):a.position(e.left,e.top),a.zIndex().focus(),e.lock&&a.lock(),a._addEvent(),a._ie6PngFix(),n=null,e.init&&e.init.call(a,t),a},content:function(e){var t,n,a,o,r=this,s=r.DOM,l=s.wrap[0],c=l.offsetWidth,u=l.offsetHeight,d=parseInt(l.style.left),m=parseInt(l.style.top),p=l.style.width,g=s.content,f=g[0];return r._elemBack&&r._elemBack(),l.style.width="auto",e===i?f:("string"==typeof e?g.html(e):e&&1===e.nodeType&&(o=e.style.display,t=e.previousSibling,n=e.nextSibling,a=e.parentNode,r._elemBack=function(){t&&t.parentNode?t.parentNode.insertBefore(e,t.nextSibling):n&&n.parentNode?n.parentNode.insertBefore(e,n):a&&a.appendChild(e),e.style.display=o,r._elemBack=null},g.html(""),f.appendChild(e),e.style.display="block"),arguments[1]||(r.config.follow?r.follow(r.config.follow):(c=l.offsetWidth-c,u=l.offsetHeight-u,d-=c/2,m-=u/2,l.style.left=Math.max(d,0)+"px",l.style.top=Math.max(m,0)+"px"),p&&"auto"!==p&&(l.style.width=l.offsetWidth+"px"),r._autoPositionType()),r._ie6SelectFix(),r._runScript(f),r)},title:function(e){var t=this.DOM,n=t.wrap,a=t.title,o="aui_state_noTitle";return e===i?a[0]:(e===!1?(a.hide().html(""),n.addClass(o)):(a.show().html(e||""),n.removeClass(o)),this)},position:function(e,t){var n=this,a=n.config,o=n.DOM.wrap[0],r=m?!1:a.fixed,s=m&&n.config.fixed,u=c.scrollLeft(),d=c.scrollTop(),p=r?0:u,g=r?0:d,f=l.width(),h=l.height(),v=o.offsetWidth,S=o.offsetHeight,P=o.style;return(e||0===e)&&(n._left=-1!==(""+e).indexOf("%")?e:null,e=n._toNumber(e,f-v),"number"==typeof e?(e=s?e+=u:e+p,P.left=Math.max(e,p)+"px"):"string"==typeof e&&(P.left=e)),(t||0===t)&&(n._top=-1!==(""+t).indexOf("%")?t:null,t=n._toNumber(t,h-S),"number"==typeof t?(t=s?t+=d:t+g,P.top=Math.max(t,g)+"px"):"string"==typeof t&&(P.top=t)),e!==i&&t!==i&&(n._follow=null,n._autoPositionType()),n},size:function(e,t){var i,n,a,o,r=this,s=(r.config,r.DOM),c=s.wrap,u=s.main,d=c[0].style,m=u[0].style;return e&&(r._width=-1!==(""+e).indexOf("%")?e:null,i=l.width()-c[0].offsetWidth+u[0].offsetWidth,a=r._toNumber(e,i),e=a,"number"==typeof e?(d.width="auto",m.width=Math.max(r.config.minWidth,e)+"px",d.width=c[0].offsetWidth+"px"):"string"==typeof e&&(m.width=e,"auto"===e&&c.css("width","auto"))),t&&(r._height=-1!==(""+t).indexOf("%")?t:null,n=l.height()-c[0].offsetHeight+u[0].offsetHeight,o=r._toNumber(t,n),t=o,"number"==typeof t?m.height=Math.max(r.config.minHeight,t)+"px":"string"==typeof t&&(m.height=t)),r._ie6SelectFix(),r},follow:function(t){var i,n=this,a=n.config;if(("string"==typeof t||t&&1===t.nodeType)&&(i=e(t),t=i[0]),!t||!t.offsetWidth&&!t.offsetHeight)return n.position(n._left,n._top);var o=g+"follow",r=l.width(),s=l.height(),u=c.scrollLeft(),d=c.scrollTop(),p=i.offset(),f=t.offsetWidth,h=t.offsetHeight,v=m?!1:a.fixed,S=v?p.left-u:p.left,P=v?p.top-d:p.top,C=n.DOM.wrap[0],b=C.style,I=C.offsetWidth,_=C.offsetHeight,y=S-(I-f)/2,T=P+h,D=v?0:u,L=v?0:d;return y=D>y?S:y+I>r&&S-I>D?S-I+f:y,T=T+_>s+L&&P-_>L?P-_:T,b.left=y+"px",b.top=T+"px",n._follow&&n._follow.removeAttribute(o),n._follow=t,t[o]=a.id,n._autoPositionType(),n},button:function(){var t=this,n=arguments,a=t.DOM,o=a.buttons,r=o[0],s="aui_state_highlight",l=t._listeners=t._listeners||{},c=e.isArray(n[0])?n[0]:[].slice.call(n);return n[0]===i?r:(e.each(c,function(i,n){var a=n.name,o=!l[a],c=o?document.createElement("button"):l[a].elem;l[a]||(l[a]={}),n.callback&&(l[a].callback=n.callback),n.className&&(c.className=n.className),n.focus&&(t._focus&&t._focus.removeClass(s),t._focus=e(c).addClass(s),t.focus()),c.setAttribute("type","button"),c[g+"callback"]=a,c.disabled=!!n.disabled,o&&(c.innerHTML=a,l[a].elem=c,r.appendChild(c))}),o[0].style.display=c.length?"":"none",t._ie6SelectFix(),t)},show:function(){return this.DOM.wrap.show(),!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.show(),this},hide:function(){return this.DOM.wrap.hide(),!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.hide(),this},close:function(){if(this.closed)return this;var e=this,i=e.DOM,a=i.wrap,o=f.list,r=e.config.close,s=e.config.follow;if(e.time(),"function"==typeof r&&r.call(e,t)===!1)return e;e.unlock(),e._elemBack&&e._elemBack(),a[0].className=a[0].style.cssText="",i.title.html(""),i.content.html(""),i.buttons.html(""),f.focus===e&&(f.focus=null),s&&s.removeAttribute(g+"follow"),delete o[e.config.id],e._removeEvent(),e.hide(!0)._setAbsolute();for(var l in e)e.hasOwnProperty(l)&&"DOM"!==l&&delete e[l];return n?a.remove():n=e,e},time:function(e){var t=this,i=t.config.cancelVal,n=t._timer;return n&&clearTimeout(n),e&&(t._timer=setTimeout(function(){t._click(i)},1e3*e)),t},focus:function(){try{if(this.config.focus){var e=this._focus&&this._focus[0]||this.DOM.close[0];e&&e.focus()}}catch(t){}return this},zIndex:function(){var e=this,t=e.DOM,i=t.wrap,n=f.focus,a=f.defaults.zIndex++;return i.css("zIndex",a),e._lockMask&&e._lockMask.css("zIndex",a-1),n&&n.DOM.wrap.removeClass("aui_state_focus"),f.focus=e,i.addClass("aui_state_focus"),e},lock:function(){if(this._lock)return this;var t=this,i=f.defaults.zIndex-1,n=t.DOM.wrap,a=t.config,o=c.width(),r=c.height(),s=t._lockMaskWrap||e(document.body.appendChild(document.createElement("div"))),l=t._lockMask||e(s[0].appendChild(document.createElement("div"))),u="(document).documentElement",d=p?"width:"+o+"px;height:"+r+"px":"width:100%;height:100%",g=m?"position:absolute;left:expression("+u+".scrollLeft);top:expression("+u+".scrollTop);width:expression("+u+".clientWidth);height:expression("+u+".clientHeight)":"";return t.zIndex(),n.addClass("aui_state_lock"),s[0].style.cssText=d+";position:fixed;z-index:"+i+";top:0;left:0;overflow:hidden;"+g,l[0].style.cssText="height:100%;background:"+a.background+";filter:alpha(opacity=0);opacity:0",m&&l.html('<iframe src="about:blank" style="width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;filter:alpha(opacity=0)"></iframe>'),l.stop(),l.bind("click",function(){}).bind("dblclick",function(){}),0===a.duration?l.css({opacity:a.opacity}):l.animate({opacity:a.opacity},a.duration),t._lockMaskWrap=s,t._lockMask=l,t._lock=!0,t},unlock:function(){var e=this,t=e._lockMaskWrap,i=e._lockMask;if(!e._lock)return e;var a=t[0].style,o=function(){m&&(a.removeExpression("width"),a.removeExpression("height"),a.removeExpression("left"),a.removeExpression("top")),a.cssText="display:none",n&&t.remove()};return i.stop().unbind(),e.DOM.wrap.removeClass("aui_state_lock"),e.config.duration?i.animate({opacity:0},e.config.duration,o):o(),e._lock=!1,e},_getDOM:function(){var t=document.createElement("div"),i=document.body;t.style.cssText="position:absolute;left:0;top:0",t.innerHTML=f._templates,i.insertBefore(t,i.firstChild);for(var n,a=0,o={wrap:e(t)},r=t.getElementsByTagName("*"),s=r.length;s>a;a++)n=r[a].className.split("aui_")[1],n&&(o[n]=e(r[a]));return o},_toNumber:function(e,t){if(!e&&0!==e||"number"==typeof e)return e;var i=e.length-1;return e.lastIndexOf("px")===i?e=parseInt(e):e.lastIndexOf("%")===i&&(e=parseInt(t*e.split("%")[0]/100)),e},_ie6PngFix:m?function(){for(var e,t,i,n,a=0,o=f.defaults.path+"/skins/",r=this.DOM.wrap[0].getElementsByTagName("*");r.length>a;a++)e=r[a],t=e.currentStyle.png,t&&(i=o+t,n=e.runtimeStyle,n.backgroundImage="none",n.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i+"',sizingMethod='crop')")}:e.noop,_ie6SelectFix:function(){var e=this.DOM.wrap,t=e[0],i=g+"iframeMask",n=e[i],a=t.offsetWidth,o=t.offsetHeight;a+="px",o+="px",n?(n.style.width=a,n.style.height=o):(n=t.appendChild(document.createElement("iframe")),e[i]=n,n.src="about:blank",n.frameBorder=0,n.style.cssText="position:absolute;z-index:-1;left:0;top:0;border:0;filter:alpha(opacity=0);width:"+a+";height:"+o)},_runScript:function(e){for(var t,i=0,n=0,a=e.getElementsByTagName("script"),o=a.length,r=[];o>i;i++)"text/dialog"===a[i].type&&(r[n]=a[i].innerHTML,n++);r.length&&(r=r.join(""),t=Function(r),t.call(this))},_autoPositionType:function(){this[this.config.fixed?"_setFixed":"_setAbsolute"]()},_setFixed:function(){return m&&e(function(){var t="backgroundAttachment";"fixed"!==u.css(t)&&"fixed"!==e("body").css(t)&&u.css({zoom:1,backgroundImage:"url(about:blank)",backgroundAttachment:"fixed"})}),function(){var e=this.DOM.wrap,t=e[0].style;if(m){var i=parseInt(e.css("left")),n=parseInt(e.css("top")),a=c.scrollLeft(),o=c.scrollTop(),r="(document.documentElement)";this._setAbsolute(),t.setExpression("left","eval("+r+".scrollLeft + "+(i-a)+') + "px"'),t.setExpression("top","eval("+r+".scrollTop + "+(n-o)+') + "px"')}else t.position="fixed"}}(),_setAbsolute:function(){var e=this.DOM.wrap[0].style;m&&(e.removeExpression("left"),e.removeExpression("top")),e.position="absolute"},_click:function(e){var i=this,n=i._listeners[e]&&i._listeners[e].callback;return"function"!=typeof n||n.call(i,t)!==!1?i.close():i},_reset:function(e){var t,i=this,n=i._winSize||l.width()*l.height(),a=i._follow,o=i._width,r=i._height,s=i._left,c=i._top;e&&(t=i._winSize=l.width()*l.height(),n===t)||((o||r)&&i.size(o,r),a?i.follow(a):(s||c)&&i.position(s,c))},_addEvent:function(){var e,n=this,a=n.config,o="CollectGarbage"in t,r=n.DOM;n._winResize=function(){e&&clearTimeout(e),e=setTimeout(function(){n._reset(o)},40)},r.wrap.bind("click",function(e){var t,o=e.target;return o.disabled?!1:o===r.close[0]?(n.mouseover=!1,n._click(a.cancelVal),!1):(t=o[g+"callback"],t&&n._click(t),n._ie6SelectFix(),i)}).bind("mousedown",function(){}).bind("mouseover",function(){n.mouseover=!0}).bind("mouseout",function(){n.mouseover=!1;var e=n.config.mouseout;"function"==typeof e&&e.call(n,t)})},_removeEvent:function(){var e=this,t=e.DOM;t.wrap.unbind()}},f.fn._init.prototype=f.fn,e.fn.dialog=e.fn.artDialog=function(){var e=arguments;return this[this.live?"live":"bind"]("click",function(){return f.apply(this,e),!1}),this},f.focus=null,f.get=function(e){return e===i?f.list:f.list[e]},f.list={},c.bind("keydown",function(e){var t=e.target,i=t.nodeName,n=/^INPUT|TEXTAREA$/,a=f.focus,o=e.keyCode;a&&a.config.esc&&!n.test(i)&&27===o&&a._click(a.config.cancelVal)}),r=t._artDialog_path||function(e,t,i){for(t in e)e[t].src&&-1!==e[t].src.indexOf("artDialog")&&(i=e[t]);return a=i||e[e.length-1],i=a.src.replace(/\\/g,"/"),0>i.lastIndexOf("/")?".":i.substring(0,i.lastIndexOf("/"))}(document.getElementsByTagName("script")),o=a.src.split("skin=")[1]){var h=document.createElement("link");h.rel="stylesheet",h.href=r+"/skins/"+o+".css?"+f.fn.version,a.parentNode.insertBefore(h,a)}l.bind("load",function(){setTimeout(function(){s||f({left:"-9999em",time:9,fixed:!1,lock:!1,focus:!1})},150)});try{document.execCommand("BackgroundImageCache",!1,!0)}catch(v){}f._templates='<div class="aui_outer"><table class="aui_border"><tbody><tr><td class="aui_nw"></td><td class="aui_n"></td><td class="aui_ne"></td></tr><tr><td class="aui_w"></td><td class="aui_c"><div class="aui_inner"><table class="aui_dialog"><tbody><tr><td colspan="2" class="aui_header"><div class="aui_titleBar"><div class="aui_title"></div><a class="aui_close" href="javascript:/*artDialog*/;">×</a></div></td></tr><tr><td class="aui_icon"><div class="aui_iconBg"></div></td><td class="aui_main"><div class="aui_content"></div></td></tr><tr><td colspan="2" class="aui_footer"><div class="aui_buttons"></div></td></tr></tbody></table></div></td><td class="aui_e"></td></tr><tr><td class="aui_sw"></td><td class="aui_s"></td><td class="aui_se"></td></tr></tbody></table></div>',f.defaults={content:'<div class="aui_loading"><span>loading..</span></div>',title:"消息",button:null,ok:null,cancel:null,init:null,close:null,okVal:"确定",cancelVal:"取消",width:"auto",height:"auto",minWidth:96,minHeight:32,padding:"5px",skin:"",icon:null,time:null,esc:!1,focus:!0,show:!0,follow:null,path:r,lock:!1,background:"#000",opacity:.7,duration:300,fixed:!1,left:"50%",top:"38.2%",zIndex:1987,resize:!0,drag:!0,mouseout:null},t.artDialog=e.dialog=e.artDialog=f})(this.art||this.jQuery&&(this.art=e),this),function(e){var t,i,n=e(window),a=e(document),o=document.documentElement,r=!("minWidth"in o.style),s="onlosecapture"in o,l="setCapture"in o;artDialog.dragEvent=function(){var e=this,t=function(t){var i=e[t];e[t]=function(){return i.apply(e,arguments)}};t("start"),t("move"),t("end")},artDialog.dragEvent.prototype={onstart:e.noop,start:function(e){return a.bind("mousemove",this.move).bind("mouseup",this.end),this._sClientX=e.clientX,this._sClientY=e.clientY,this.onstart(e.clientX,e.clientY),!1},onmove:e.noop,move:function(e){return this._mClientX=e.clientX,this._mClientY=e.clientY,this.onmove(e.clientX-this._sClientX,e.clientY-this._sClientY),!1},onend:e.noop,end:function(e){return a.unbind("mousemove",this.move).unbind("mouseup",this.end),this.onend(e.clientX,e.clientY),!1}},i=function(e){var i,o,c,u,d,m,p=artDialog.focus,g=p.DOM,f=g.wrap,h=g.title,v=g.main,S="getSelection"in window?function(){window.getSelection().removeAllRanges()}:function(){try{document.selection.empty()}catch(e){}};t.onstart=function(){m?(o=v[0].offsetWidth,c=v[0].offsetHeight):(u=f[0].offsetLeft,d=f[0].offsetTop),a.bind("dblclick",t.end),!r&&s?h.bind("losecapture",t.end):n.bind("blur",t.end),l&&h[0].setCapture(),f.addClass("aui_state_drag"),p.focus()},t.onmove=function(e,t){if(m){var n=f[0].style,a=v[0].style,r=e+o,s=t+c;n.width="auto",a.width=Math.max(0,r)+"px",n.width=f[0].offsetWidth+"px",a.height=Math.max(0,s)+"px"}else{var a=f[0].style,l=Math.max(i.minX,Math.min(i.maxX,e+u)),g=Math.max(i.minY,Math.min(i.maxY,t+d));a.left=l+"px",a.top=g+"px"}S(),p._ie6SelectFix()},t.onend=function(){a.unbind("dblclick",t.end),!r&&s?h.unbind("losecapture",t.end):n.unbind("blur",t.end),l&&h[0].releaseCapture(),r&&!p.closed&&p._autoPositionType(),f.removeClass("aui_state_drag")},m=e.target===g.se[0]?!0:!1,i=function(){var e,t,i=p.DOM.wrap[0],o="fixed"===i.style.position,r=i.offsetWidth,s=i.offsetHeight,l=n.width(),c=n.height(),u=o?0:a.scrollLeft(),d=o?0:a.scrollTop(),e=l-r+u;return t=c-s+d,{minX:u,minY:d,maxX:e,maxY:t}}(),t.start(e)},a.bind("mousedown",function(e){var n=artDialog.focus;if(n){var a=e.target,o=n.config,r=n.DOM;return o.drag!==!1&&a===r.title[0]||o.resize!==!1&&a===r.se[0]?(t=t||new artDialog.dragEvent,i(e),!1):void 0}})}(this.art||this.jQuery&&(this.art=e))});